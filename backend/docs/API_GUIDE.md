# API Guide & Documentation

## Overview
LumiAI provides a comprehensive REST API documented using the OpenAPI (Swagger) standard.
This guide helps you navigate and use the API effectively.

## Accessing Documentation
Once the server is running, you can access the interactive Swagger UI at:
```
http://localhost:3000/api/docs
```
Here you can:
- Explore all available endpoints
- See expected request/response schemas
- specific Try out endpoints directly in the browser

## Authentication
Most operations requiring user context (Orders, Analysis, Profile) require a JWT token.
1. **Signup**: `POST /auth/signup`
2. **Login**: `POST /auth/login` -> Returns `access_token`
3. **Authorize**:
   - In Swagger UI, click the "Authorize" button at the top right.
   - Enter your token.
   - Now you can execute protected endpoints.

## Common Workflows

### 1. Product Browsing
- `GET /products`: List all products. Supports filtering by:
  - `category`: MAKEUP, SKINCARE
  - `minPrice`, `maxPrice`
  - `search`: Name or description
- `GET /products/{id}`: View product details.

### 2. Skin Analysis
- `POST /analysis/scan`: Upload a selfie image.
- **Returns**: Analysis result (Tone, Skin Type) + **Product Recommendations**.

### 3. Placing an Order
- `POST /orders`: Checkout items.
  - Payload: `{ items: [{ productId, quantity }], paymentToken }` (Mock payment)
- `GET /orders`: View your order history.

## Error Handling
The API returns standard HTTP error codes:
- **400 Bad Request**: Validation failed (check error message).
- **401 Unauthorized**: Missing or invalid JWT token.
- **403 Forbidden**: Access denied (e.g., User trying to access Admin route).
- **404 Not Found**: Resource (Product, Order) does not exist.
- **500 Internal Server Error**: Something went wrong on the server.

## Postman Collection
A Postman collection can be generated by importing the JSON spec from:
```
http://localhost:3000/api/docs-json
```
